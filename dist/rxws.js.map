{"version":3,"sources":["webpack:///rxws.js","webpack:///webpack/bootstrap d23dbcfd54d82e84ad93","webpack:///./src/rxws.js","webpack:///./src/remove.js","webpack:///./src/request.js","webpack:///external \"rx\"","webpack:///external \"uuid\"","webpack:///./src/get.js","webpack:///./src/post.js","webpack:///./src/put.js","webpack:///./src/head.js","webpack:///./src/patch.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_remove","_remove2","_get","_get2","_post","_post2","_put","_put2","_head","_head2","_patch","_patch2","_request","_request2","remove","get","put","post","patch","head","setBackend","onNotification","resourcePath","options","_extends","resource","method","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","_defineProperty","enumerable","configurable","writable","getRetryTimer","Math","log","random","sanitizeParams","params","resourceElements","split","Error","forEach","el","generateRequestObject","config","parameters","body","data","correlationId","_nodeUuid2","resourceList","requestTransformer","header","defaultHeaders","sendRequest","request","backend","write","JSON","stringify","handleMessage","message","response","parse","responseTransformer","_response","notification","handleServerNotification","observer","requestMap","__header","statusCode","onError","onCompleted","onNext","notificationResponse","notificationMap","sendRequestQueue","requestQueue","shift","Backend","url","_defaultHeaders","undefined","_requestTransformer","_responseTransformer","connect","retryWhen","attempts","_rx","Observable","range","zip","flatMap","isConnected","seconds","console","timer","subscribe","onMessage","type","observable","create","makeRequest","push","_nodeUuid","rx","uuid"],"mappings":"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","file":"rxws.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _remove = __webpack_require__(1);\n\t\n\tvar _remove2 = _interopRequireDefault(_remove);\n\t\n\tvar _get = __webpack_require__(5);\n\t\n\tvar _get2 = _interopRequireDefault(_get);\n\t\n\tvar _post = __webpack_require__(6);\n\t\n\tvar _post2 = _interopRequireDefault(_post);\n\t\n\tvar _put = __webpack_require__(7);\n\t\n\tvar _put2 = _interopRequireDefault(_put);\n\t\n\tvar _head = __webpack_require__(8);\n\t\n\tvar _head2 = _interopRequireDefault(_head);\n\t\n\tvar _patch = __webpack_require__(9);\n\t\n\tvar _patch2 = _interopRequireDefault(_patch);\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\t_request2['default'].remove = _remove2['default'];\n\t_request2['default'].get = _get2['default'];\n\t_request2['default'].put = _put2['default'];\n\t_request2['default'].post = _post2['default'];\n\t_request2['default'].patch = _patch2['default'];\n\t_request2['default'].head = _head2['default'];\n\t_request2['default'].setBackend = _request.setBackend;\n\t_request2['default'].onNotification = _request.onNotification;\n\t\n\texports['default'] = _request2['default'];\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = remove;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction remove(resourcePath, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tmethod: 'remove'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.setBackend = setBackend;\n\texports.onNotification = onNotification;\n\texports['default'] = makeRequest;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar _rx = __webpack_require__(3);\n\t\n\tvar _nodeUuid = __webpack_require__(4);\n\t\n\tvar _nodeUuid2 = _interopRequireDefault(_nodeUuid);\n\t\n\tvar backend = undefined;\n\tvar isConnected = false;\n\tvar requestQueue = [];\n\tvar requestMap = {};\n\tvar notificationMap = {};\n\tvar defaultHeaders = {};\n\t\n\tvar requestTransformer = function requestTransformer(request) {\n\t\treturn request;\n\t};\n\t\n\tvar responseTransformer = function responseTransformer(response) {\n\t\treturn response;\n\t};\n\t\n\tfunction getRetryTimer(i) {\n\t\treturn (Math.log(i) + Math.random() * (i - 1)) * 1000;\n\t}\n\t\n\tfunction sanitizeParams(resource, params) {\n\t\tvar resourceElements = resource.split('.');\n\t\n\t\tif (resourceElements.length > 1 && !params) {\n\t\t\tthrow new Error('Invalid params: param is required for resource ' + resourceElements[0]);\n\t\t}\n\t\n\t\tresourceElements.forEach(function (el, i) {\n\t\t\tif (i > 0) {\n\t\t\t\tif (!params[el]) throw new Error('Invalid params: param is required for resource ' + el);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t * Generate a request object which will be sent to the server.\n\t * The config needs to have a 'resource' and 'method' attribute.\n\t */\n\tfunction generateRequestObject(config) {\n\t\tif (!config || !config.resource || !config.method) {\n\t\t\tthrow new Error('Invalid config', config);\n\t\t}\n\t\n\t\tsanitizeParams(config.resource, config.parameters);\n\t\n\t\tvar body = config.data;\n\t\tdelete config.data;\n\t\n\t\tvar correlationId = (0, _nodeUuid2['default'])();\n\t\tvar resourceList = config.resource.split('.');\n\t\n\t\tif (config.method === 'remove') config.method = 'delete';\n\t\tconfig.resource = config.method + '.' + config.resource;\n\t\tdelete config.method;\n\t\n\t\treturn requestTransformer({\n\t\t\theader: _extends({}, defaultHeaders, config, {\n\t\t\t\tcorrelationId: correlationId\n\t\t\t}),\n\t\t\tbody: _defineProperty({}, resourceList[resourceList.length - 1], body)\n\t\t});\n\t}\n\t\n\tfunction sendRequest(request) {\n\t\tbackend.write(JSON.stringify(request));\n\t}\n\t\n\tfunction handleMessage(message) {\n\t\tvar response = JSON.parse(message);\n\t\tresponse = responseTransformer(response);\n\t\n\t\tvar _response = response;\n\t\tvar header = _response.header;\n\t\n\t\tif (header.notification) {\n\t\t\treturn handleServerNotification(response);\n\t\t}\n\t\n\t\tvar observer = requestMap[header.correlationId];\n\t\n\t\tif (!observer) throw new Error('No associated request for the server message', message);else {\n\t\t\tresponse.body.__header = response.header;\n\t\t\tif (response.header.statusCode !== 200) {\n\t\t\t\tobserver.onError(response.body);\n\t\t\t\tobserver.onCompleted(response.body);\n\t\t\t} else {\n\t\t\t\tobserver.onNext(response.body);\n\t\t\t\tobserver.onCompleted(response.body);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction handleServerNotification(message) {\n\t\tsendRequest({\n\t\t\theader: _extends({}, defaultHeaders, message.header)\n\t\t});\n\t\n\t\tvar notificationResponse = notificationMap[message.header.notification];\n\t\n\t\tif (notificationResponse) {\n\t\t\tnotificationResponse.observer.onNext(message.body);\n\t\t}\n\t}\n\t\n\tfunction sendRequestQueue() {\n\t\twhile (requestQueue.length) {\n\t\t\tsendRequest(requestQueue.shift());\n\t\t}\n\t}\n\t\n\tfunction setBackend(Backend, url) {\n\t\tvar _defaultHeaders = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t\tvar _requestTransformer = arguments.length <= 3 || arguments[3] === undefined ? requestTransformer : arguments[3];\n\t\n\t\tvar _responseTransformer = arguments.length <= 4 || arguments[4] === undefined ? responseTransformer : arguments[4];\n\t\n\t\tif (!url) throw new Error('No backend url provided');\n\t\tbackend = Backend;\n\t\tdefaultHeaders = _defaultHeaders;\n\t\trequestTransformer = _requestTransformer;\n\t\tresponseTransformer = _responseTransformer;\n\t\n\t\tbackend.connect(url).retryWhen(function (attempts) {\n\t\t\treturn _rx.Observable.range(1, 30000).zip(attempts, function (i) {\n\t\t\t\treturn i;\n\t\t\t}).flatMap(function (i) {\n\t\t\t\tisConnected = false;\n\t\t\t\tvar seconds = getRetryTimer(i);\n\t\t\t\tconsole.log(\"delay retry by \" + seconds + \" second(s)\");\n\t\t\t\treturn _rx.Observable.timer(seconds);\n\t\t\t});\n\t\t}).subscribe(function (response) {\n\t\t\tisConnected = true;\n\t\t\tsendRequestQueue();\n\t\t\tbackend.onMessage(handleMessage);\n\t\t});\n\t}\n\t\n\tfunction onNotification(type) {\n\t\tif (notificationMap[type]) return notificationMap[type].observable;\n\t\n\t\tnotificationMap[type] = {\n\t\t\tobservable: _rx.Observable.create(function (observer) {\n\t\t\t\tnotificationMap[type].observer = observer;\n\t\t\t})\n\t\t};\n\t\n\t\treturn notificationMap[type].observable;\n\t}\n\t\n\tfunction makeRequest(config) {\n\t\tif (!backend) throw new Error('Must define a websocket backend');\n\t\n\t\tvar request = generateRequestObject(config);\n\t\n\t\treturn _rx.Observable.create(function (observer) {\n\t\t\tif (isConnected) {\n\t\t\t\tsendRequest(request);\n\t\t\t} else {\n\t\t\t\trequestQueue.push(request);\n\t\t\t}\n\t\n\t\t\trequestMap[request.header.correlationId] = observer;\n\t\t});\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = rx;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = uuid;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = get;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction get(resourcePath, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tmethod: 'get'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = post;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction post(resourcePath, data, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tdata: data,\n\t\t\tmethod: 'post'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = put;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction put(resourcePath, data, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tdata: data,\n\t\t\tmethod: 'put'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = head;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction head(resourcePath, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tmethod: 'head'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = patch;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _request = __webpack_require__(2);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction patch(resourcePath, data, options) {\n\t\treturn (0, _request2['default'])(_extends({}, options, {\n\t\t\tresource: resourcePath,\n\t\t\tdata: data,\n\t\t\tmethod: 'patch'\n\t\t}));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** rxws.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d23dbcfd54d82e84ad93\n **/","import remove from './remove';\nimport get from './get';\nimport post from './post';\nimport put from './put';\nimport head from './head';\nimport patch from './patch';\n\nimport makeRequest, { setBackend, onNotification } from './request';\n\nmakeRequest.remove = remove;\nmakeRequest.get = get;\nmakeRequest.put = put;\nmakeRequest.post = post;\nmakeRequest.patch = patch;\nmakeRequest.head = head;\nmakeRequest.setBackend = setBackend;\nmakeRequest.onNotification = onNotification;\n\nexport default makeRequest;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rxws.js\n **/","import request from './request';\n\nexport default function remove(resourcePath, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tmethod: 'remove'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/remove.js\n **/","import { Observable } from 'rx';\nimport uuid from 'node-uuid';\n\nlet backend;\nlet isConnected = false;\nlet requestQueue = [];\nlet requestMap = {};\nlet notificationMap = {};\nlet defaultHeaders = {};\n\nlet requestTransformer = function(request) {\n\treturn request;\n}\n\nlet responseTransformer = function(response) {\n\treturn response;\n}\n\nfunction getRetryTimer(i) {\n\treturn (Math.log(i) + (Math.random() * (i - 1))) * 1000;\n}\n\nfunction sanitizeParams(resource, params) {\n\tlet resourceElements = resource.split('.');\n\n\tif (resourceElements.length > 1 && !params) {\n\t\tthrow new Error(`Invalid params: param is required for resource ${resourceElements[0]}`);\n\t}\n\n\tresourceElements.forEach((el, i) => {\n\t\tif (i > 0) {\n\t\t\tif (!params[el]) throw new Error(`Invalid params: param is required for resource ${el}`);\n\t\t}\n\t});\n}\n\n/**\n * Generate a request object which will be sent to the server.\n * The config needs to have a 'resource' and 'method' attribute.\n */\nfunction generateRequestObject(config) {\n\tif (!config || !config.resource || !config.method) {\n\t\tthrow new Error('Invalid config', config);\n\t}\n\n\tsanitizeParams(config.resource, config.parameters);\n\n\tlet body = config.data;\n\tdelete config.data;\n\n\tlet correlationId = uuid();\n\tlet resourceList = config.resource.split('.');\n\n\tif (config.method === 'remove') config.method = 'delete';\n\tconfig.resource = config.method + '.' + config.resource;\n\tdelete config.method;\n\n\treturn requestTransformer({\n\t\theader: {\n\t\t\t...defaultHeaders,\n\t\t\t...config,\n\t\t\tcorrelationId\n\t\t},\n\t\tbody: {\n\t\t\t[resourceList[resourceList.length - 1]]: body\n\t\t}\n\t})\n}\n\nfunction sendRequest(request) {\n\tbackend.write(JSON.stringify(request));\n}\n\nfunction handleMessage(message) {\n\tlet response = JSON.parse(message);\n\tresponse = responseTransformer(response);\n\n\tlet { header } = response;\n\n\tif (header.notification) {\n\t\treturn handleServerNotification(response);\n\t}\n\n\tlet observer = requestMap[header.correlationId];\n\n\tif (!observer) throw new Error('No associated request for the server message', message);\n\telse {\n\t\tresponse.body.__header = response.header;\n\t\tif (response.header.statusCode !== 200) {\n\t\t\tobserver.onError(response.body);\n\t\t\tobserver.onCompleted(response.body);\n\t\t} else {\n\t\t\tobserver.onNext(response.body);\n\t\t\tobserver.onCompleted(response.body);\n\t\t}\n\t}\n}\n\nfunction handleServerNotification(message) {\n\tsendRequest({\n\t\theader: {\n\t\t\t...defaultHeaders,\n\t\t\t...message.header\n\t\t}\n\t});\n\n\tlet notificationResponse = notificationMap[message.header.notification];\n\n\tif (notificationResponse) {\n\t\tnotificationResponse.observer.onNext(message.body);\n\t}\n}\n\nfunction sendRequestQueue() {\n\twhile (requestQueue.length) {\n\t\tsendRequest(requestQueue.shift());\n\t}\n}\n\nexport function setBackend(Backend, url, _defaultHeaders = {}, _requestTransformer = requestTransformer, _responseTransformer = responseTransformer) {\n\tif (!url) throw new Error('No backend url provided');\n\tbackend = Backend;\n\tdefaultHeaders = _defaultHeaders;\n\trequestTransformer = _requestTransformer;\n\tresponseTransformer = _responseTransformer;\n\n\tbackend.connect(url).retryWhen(function(attempts) {\n\t\treturn Observable.range(1, 30000).zip(attempts, function(i) {\n\t\t\treturn i;\n\t\t}).flatMap(function(i) {\n\t\t\tisConnected = false;\n\t\t\tconst seconds = getRetryTimer(i);\n\t\t\tconsole.log(\"delay retry by \" + seconds + \" second(s)\");\n\t\t\treturn Observable.timer(seconds);\n\t\t});\n\t}).subscribe((response) => {\n\t\tisConnected = true;\n\t\tsendRequestQueue();\n\t\tbackend.onMessage(handleMessage);\n\t});\n}\n\nexport function onNotification(type) {\n\tif (notificationMap[type]) return notificationMap[type].observable;\n\n\tnotificationMap[type] = {\n\t\tobservable: Observable.create((observer) => {\n\t\t\tnotificationMap[type].observer = observer;\n\t\t})\n\t}\n\n\treturn notificationMap[type].observable;\n}\n\nexport default function makeRequest(config) {\n\tif (!backend) throw new Error('Must define a websocket backend');\n\n\tlet request = generateRequestObject(config);\n\n\treturn Observable.create((observer) => {\n\t\tif (isConnected) {\n\t\t\tsendRequest(request);\n\t\t} else {\n\t\t\trequestQueue.push(request);\n\t\t}\n\n\t\trequestMap[request.header.correlationId] = observer;\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/request.js\n **/","module.exports = rx;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"rx\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = uuid;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"uuid\"\n ** module id = 4\n ** module chunks = 0\n **/","import request from './request';\n\nexport default function get(resourcePath, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tmethod: 'get'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/get.js\n **/","import request from './request';\n\nexport default function post(resourcePath, data, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tdata: data,\n\t\tmethod: 'post'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/post.js\n **/","import request from './request';\n\nexport default function put(resourcePath, data, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tdata: data,\n\t\tmethod: 'put'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/put.js\n **/","import request from './request';\n\nexport default function head(resourcePath, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tmethod: 'head'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/head.js\n **/","import request from './request';\n\nexport default function patch(resourcePath, data, options) {\n\treturn request({\n\t\t...options,\n\t\tresource: resourcePath,\n\t\tdata: data,\n\t\tmethod: 'patch'\n\t})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/patch.js\n **/"],"sourceRoot":""}